//randomPicker
if (localStorage.getItem('userEmail') === null) {
    if (localStorage.getItem('choice') === "guest") {
        document.querySelector('#choice').style.display = "none";
        document.querySelector('#user').style.display = "none";
    }
}
document.querySelector('#user').onclick = () => {
    window.location.href = "user.html";
}
let choice1 = 'өглөө';
let choice2 = 'өдөр';
let choice3 = 'утгаҮгүй';
let $choice = document.querySelector('.inC');
let Cchoice = document.querySelector('#choice');
let m = [
    ["Өглөө ", []],
    ["Өдөр ", []],
    ["Орой ", []]
];

Cchoice.onclick = () => {
    if ($choice.innerText === "user") {
        $choice.innerText = 'admin';
        choice1 = 'өглөө';
        choice2 = 'өдөр';
        m[0][1] = []
        m[1][1] = []
        m[2][1] = []
        main()
        document.querySelector('.dis').style.display = "block";
    } else {
        $choice.innerText = "user";
        choice1 = localStorage.getItem('userEmail')
        choice2 = choice1;
        m[0][1] = []
        m[1][1] = []
        m[2][1] = []
        main();
        document.querySelector('.dis').style.display = "none";
    };
}
const main = () => {
    $(function() {
        function t(t, e) { return t = t || 100, e = e || 0, Math.ceil(Math.random() * (t - e) + e) }

        function e(t) {
            let e = $("<div class='comment'>" + t + "</div>");
            e.on("animationend webkitAnimationEnd", function(t) { $(this).remove() }).appendTo(g)
        }

        function n(t, e) {
            if (!i) {
                if (d = t, o.text(m[d][0]), s.text(""), c.text(" та юу идмээр байна?"), a.addClass("shake"), k = 0, e) {
                    let n = $(".tip").show();
                    setTimeout(function() { n.remove() }, 4e3)
                }
                _hmt.push(["_trackEvent", "time", "change", m[d][0]])
            }
        }
        let i = 0,
            a = $(".title"),
            o = $(".time"),
            s = $(".what"),
            c = $(".punctuation"),
            l = $("#start"),
            r = $("#temp_container"),


            //utgagui zvil
            h = [],
            u = [],
            d = 2,
            p = (new Date).getHours(),
            f = $(window),
            g = $("body"),
            v = $("#wrapper"),
            x = $(".os"),
            k = 0,
            w = "human",
            b, C, E;


        let listenFireStoreUtgagui = () => {
            db.collection('randomFood').where('user', '==', choice3).get().then((snapshot) => {
                snapshot.forEach((doc) => {
                    h.push(doc.data().food);
                })
            })
        }
        let listenFireStoreOgloo = () => {
            db.collection('randomFood').where('user', '==', choice1).get().then((snapshot) => {
                snapshot.forEach((doc) => {
                    m[0][1].push(doc.data().food)
                })
            })
            console.log('s')
        }

        let listenFireStoreOdor = () => {
            db.collection('randomFood').where('user', '==', choice2).get().then((snapshot) => {
                snapshot.forEach((doc) => {
                    m[1][1].push(doc.data().food)
                })
            })
        }



        listenFireStoreUtgagui()
        listenFireStoreOgloo()
        listenFireStoreOdor()
        console.log(m[0][1], m[1][1])
        m[2][1] = m[1][1];
        a.on("animationend webkitAnimationEnd", function(t) { $(this).removeClass("shake") }), r.on("animationend webkitAnimationEnd", function(t) { $(t.target).remove() }), l.click(function() {
            if (g.toggleClass("playing", !i), i) i = 0, "monster" == w && x.text(u[t(u.length)]), c.text(""), l.find("span").text("Play"), clearTimeout(b), document.title = a.text() + "t1 t2 t3";
            else {
                i = 1, k++, 2 == k && e(""), 5 == k && e(""), 10 == k && e(""), 20 == k && e(""), 30 == k && e("");
                let n = "human" == w ? m[d][1] : h;
                c.text(""), l.find("span").text("stop"), x.text(""),
                    function o() {
                        let e = t(n.length) - 1,
                            i = n[e],
                            a = t(C),
                            c = t(E - 50),
                            l = t(37, 14);
                        s.text(i);
                        let m = $("<span class='temp'>" + i + "</span>").css({ top: a, left: c, color: "rgba(0,0,0," + t(7, 3) / 10 + ")", fontSize: l + "px" }).appendTo(r);
                        b = setTimeout(o, 60)
                    }()
            }
        }), $("#toggle span").click(function() { $(this).hasClass("selected") || ($(this).addClass("selected").siblings().removeClass("selected"), w = $(this).data("type"), alert("monster" == w ? "are you ok?" : "xd"), k = 0, _hmt.push(["_trackEvent", "type", "toggle", w])) }), 9 > p || p >= 23 ? n(0, 1) : 13 > p && n(1, 1), a.click(function() { n(d >= m.length - 1 ? 0 : d + 1) }), $("#ribbon").click(function() { return alert(this.title), !1 }), f.resize(function() { E = f.width(), C = f.height() }).resize()
    });
}
main()